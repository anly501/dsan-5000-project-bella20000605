<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bella Shi’s Website - Conclusions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Conclusions.html">Conclusions</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bella Shi’s Website</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About me</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/anly501/dsan-5000-project-bella20000605" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Gathering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Gathering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Cleaning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Exploration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploration</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Naive Bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Naive Bayes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Decision Trees</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ARM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ARM and Networking</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Conclusions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Conclusions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./References.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Conclusions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="q-what-are-the-range-of-mental-health-disorder-types-and-how-prevalent-are-they-in-the-population" class="level5">
<h5 class="anchored" data-anchor-id="q-what-are-the-range-of-mental-health-disorder-types-and-how-prevalent-are-they-in-the-population">Q: What are the range of mental health disorder types, and how prevalent are they in the population?<br></h5>
<p>A: There are 5 types ofmental health disorder, which includes Anxiety, Depression, Eating Disorders, Bipolar and Schizophrenia. Anxiety disorders and depression show higher prevalence rates compared to other disorders like schizophrenia, bipolar disorder, and eating disorders. This could indicate that anxiety and depression are more common mental health concerns in the population.</p>
</section>
<section id="qhow-has-this-prevalence-changed-over-time-in-the-population" class="level5">
<h5 class="anchored" data-anchor-id="qhow-has-this-prevalence-changed-over-time-in-the-population">Q:How has this prevalence changed over time in the population?<br></h5>
<p>A: The prevalence rates for disorders like schizophrenia, bipolar disorder, eating disorders and anxiety disorders keep increaseing over the years, while the depression retes does not have a liner increasement.it has a peak in 1997 and then decrease to a lower level.</p>
</section>
<section id="q-what-is-the-relationship-between-socialeconimic-factorsincomehigh-income-lower-middle-income-upper-middle-income-gdp-gdp_per_capita-and-average-outcomes-correlate-with-mental-health-outcomes-depressionanxietyeating-disorders-bipolar-disorder" class="level5">
<h5 class="anchored" data-anchor-id="q-what-is-the-relationship-between-socialeconimic-factorsincomehigh-income-lower-middle-income-upper-middle-income-gdp-gdp_per_capita-and-average-outcomes-correlate-with-mental-health-outcomes-depressionanxietyeating-disorders-bipolar-disorder">Q: What is the relationship between socialeconimic factors(income(high-income, lower-middle-income, upper-middle-income), GDP, GDP_per_capita, and average outcomes) correlate with mental health outcomes (depression,anxiety,eating disorders, bipolar disorder)?</h5>
</section>
<section id="q-how-does-the-prevalence-of-mental-disorders-vary-by-income-group" class="level4">
<h4 class="anchored" data-anchor-id="q-how-does-the-prevalence-of-mental-disorders-vary-by-income-group">Q: How does the prevalence of mental disorders vary by income group?<br></h4>
<p>A: The Box Plot above shows the distribution of ‘Bipolar disorder (%)’, ‘Schizophrenia (%)’, ‘Eating disorders (%)’, ’Anxiety disorders (%)’prevalence vary differently by income group, while the Depression doesn’t vary accoringly by income group.</p>
</section>
<section id="q-how-does-mental-health-vary-by-education-levelaverage_adjusted_years_of_school" class="level4">
<h4 class="anchored" data-anchor-id="q-how-does-mental-health-vary-by-education-levelaverage_adjusted_years_of_school">Q: How does mental health vary by education level(average_adjusted_years_of_school)<br></h4>
<p>A: As education levels increase, the prevalence rates of Schizophrenia seem to spread out, while others don’t show a clear trend indicating a strong relationship with education level. This could indicate that other factors msy be more influential in determining the prevalence of these mental health disorders.</p>
</section>
<section id="q-how-does-mental-health-vary-by-gdp-and-gdp_per_capita" class="level4">
<h4 class="anchored" data-anchor-id="q-how-does-mental-health-vary-by-gdp-and-gdp_per_capita">Q: How does mental health vary by GDP and GDP_per_capita?<br></h4>
<p>A: The scatter plots show that they does not appear to be a clear trend or correlation between GDP and the prevalence of these mental health problems. As GDP per capita increases, the prevalence rates of eating disorder seems to spread out, while others don’t show a clear trend indicating a strong relationship with gdp per capita.</p>
</section>
<section id="q-how-does-eating-order-prevalence-changed-over-time-in-the-male-and-female" class="level4">
<h4 class="anchored" data-anchor-id="q-how-does-eating-order-prevalence-changed-over-time-in-the-male-and-female">Q: How does eating order prevalence changed over time in the male and female?<br></h4>
<p>A: The line plot above shows the global average prevalence of eating disorders over time for males, females, and all genders combined. The trends can be compared to see how the prevalence has changed over the years. Eating disorders were more than twice as prevalent among females (3.8%) than males (1.5%)</p>
</section>
<section id="q-what-is-eating-disorder-prevalence-in-us-increases-or-decrease" class="level4">
<h4 class="anchored" data-anchor-id="q-what-is-eating-disorder-prevalence-in-us-increases-or-decrease">Q: what is eating disorder prevalence in US increases? Or decrease?<br></h4>
<p>A: In years 1993 and 2012 show the highest prevalence rates. From 2013 onwards, there appears to be a slight decrease in prevalence, with rates consistently around 0.42% to 0.43%</p>
</section>
<section id="q-in-what-age-when-people-first-have-depression-or-anxiety-in-the-world" class="level4">
<h4 class="anchored" data-anchor-id="q-in-what-age-when-people-first-have-depression-or-anxiety-in-the-world">Q: In what age when people first have depression or anxiety in the world?<br></h4>
<p>A: The largest segment of the chart, making up 34.9%, is unspecified and labeled “Don’t know/Refused,” indicating a significant portion of respondents either did not know or refused to provide their age at first experience of anxiety or depression; The second-largest group is individuals aged 20–29, representing 22.2% of the distribution. This suggests that early adulthood is a common time for individuals to experience their first instance of these mental health issues; Those aged 30–39 make up 12.5% of the distribution, while individuals aged 40 and over account for 11.4%; Adolescents aged 13–19 represent 11.5% of the distribution, indicating that the onset of anxiety or depression can also begin during teenage years; The smallest identified age group is children under the age of 13, at 7.5%, which highlights that while less common, young children can also experience these mental health issues.Overall, the data suggests that the onset of anxiety or depression is reported most frequently during the ages of 20–29 and that there’s a notable amount of uncertainty or unwillingness to provide information regarding the age of first experience with these conditions.</p>
</section>
<section id="qdo-age-when-people-first-have-depression-or-anxiety-in-the-world-vary-by-continents-and-income-level" class="level4">
<h4 class="anchored" data-anchor-id="qdo-age-when-people-first-have-depression-or-anxiety-in-the-world-vary-by-continents-and-income-level">Q:Do age when people first have depression or anxiety in the world vary by continents and income level?<br></h4>
<p>A: High Uncertainty or Non-disclosure: ‘Don’t know/Refused’ responses are notably high across all entities, with Africa recording the highest at 42.7% ,lower-middle income countries at 40.6% and Europe the lowest at 14.5%. This indicates a significant amount of data is either not known or not disclosed.</p>
<p>High-Income Countries: except for ‘Don’t know/Refused’, The highest ratios are observed in the ‘Ages 13_19’and lowest in the Age &lt; 13. In these countries, the age group ’13–19’ has the highest reported ratios of first anxiety or depression onset when compared to other age groups, with the lowest incidence reported in children under 13. This could suggest that adolescence is a particularly vulnerable period for the development of these conditions in high-income countries, potentially due to a combination of social pressures, awareness, and better reporting.</p>
<p>Upper-middle income countries: except for ‘Don’t know/Refused’, The ratios are more balanced across the age categories, with the lowest ratio STILL in age &lt;13.</p>
<p>lower-middle income countries: except for ‘Don’t know/Refused’,The highest ratios are observed in the ‘Ages 20_29’ and it is almost 3 times higher than other age categories.</p>
<p>The ‘Ages 20–29’ group shows the highest ratios, nearly tripling those of other age groups. This pronounced increase could reflect specific socio-economic stresses or life transitions that are characteristic of this age group, such as entering the workforce or higher education.</p>
<p>Europe: The ratios are more balanced across the age categories, with the lowest ratio in age &lt;13.</p>
<p>Africa and Asia: The ratios are Highest in the ‘Ages 20_29’ and lowest in the Age &lt; 13, but the ratio in Asia is higher than Africa.</p>
<p>There is a global trend where the incidence of first anxiety or depression is lower in children under 13 compared to older age groups. This could be due to underdiagnosis or underreporting in this age group, or a genuine lower prevalence.</p>
<p>The high levels of ‘Don’t know/Refused’ responses call for improvements in mental health data collection and accessibility, as well as efforts to reduce stigma associated with mental health issues, to ensure more accurate and comprehensive data.</p>
</section>
<section id="q-which-set-of-factors-better-explains-mental-health-outcomes-socioeconomic-or-geographic-or-educational-factors" class="level4">
<h4 class="anchored" data-anchor-id="q-which-set-of-factors-better-explains-mental-health-outcomes-socioeconomic-or-geographic-or-educational-factors">Q: Which set of factors “better” explains mental health outcomes: socioeconomic or geographic or educational factors?<br></h4>
<p>A: <b>Socioeconomic Factors:</b> These include GDP (2022), GDP per capita, and income groups (high, low, lower middle, upper middle). High-income groups have strong positive correlations with mental health outcomes, particularly with eating disorders (0.74), and Schizophrenia(0.58). This suggests that in high-income groups, there may be a higher reported prevalence or better diagnosis of these conditions. On the other hand, low-income groups show a moderate negative correlation with some mental health outcomes, indicating a lower reported prevalence or underdiagnosis in these groups.</p>
<p><b>Educational Factors:</b> The variable ‘average_learning_Adjusted_of_school’ shows strong positive correlations with eating disorders (0.69), and Schizophrenia(0.68). This suggests that higher education levels are associated with a higher reported prevalence of these conditions, which could be due to increased awareness and reporting in more educated populations.</p>
<p><b>Geographic Factors:</b> The geographic regions show varied correlations with mental health outcomes. For example, being in Africa has a strong negative correlation with schizophrenia (-0.53) and a moderate negative correlation with eating disorder (-0.39). In contrast, Europe shows a moderate positive correlation with eating disorders (0.43). These correlations suggest that geographic location can have a significant impact on the reporting and prevalence of mental health conditions, possibly due to cultural, environmental, or healthcare-related factors.</p>
<p>In summary, educational factors, indicated by ‘average_learning_Adjusted_of_school’, show the most consistent strong positive correlations across several mental health outcomes, suggesting that education level may be a strong predictor of mental health outcomes, potentially due to greater awareness and reporting. Socioeconomic factors, particularly income level, also show strong correlations, especially in high-income groups. Geographic factors show both strong negative and moderate positive correlations, indicating a more complex relationship with mental health outcomes that could be influenced by a variety of regional factors.</p>
</section>
<section id="q-do-the-mental-health-indicators-and-educational-outcomes-necessarily-align-neatly-with-economic-categories-such-as-income-levels" class="level4">
<h4 class="anchored" data-anchor-id="q-do-the-mental-health-indicators-and-educational-outcomes-necessarily-align-neatly-with-economic-categories-such-as-income-levels">Q: Do the mental health indicators and educational outcomes necessarily align neatly with economic categories such as income levels?<br></h4>
<p>A: The essence of my findings reveals that the complexities of mental health, geolocation indicators and educational outcomes do not necessarily align neatly with economic categories such as income levels which are defined to 4 levels.</p>
</section>
<section id="q-can-we-use-educational-economic-and-geological-factors-to-predict-if-a-economy-have-a-low-or-high-eating-disorders-rate" class="level4">
<h4 class="anchored" data-anchor-id="q-can-we-use-educational-economic-and-geological-factors-to-predict-if-a-economy-have-a-low-or-high-eating-disorders-rate">Q: Can we use educational, economic, and geological factors to predict if a economy have a low or high eating disorders rate? <br></h4>
<p>A: Yes.<br> We employed a Naive bayes, random forests algorithm and decesion trees to predict the prevalence of eating disorders based on a set of educational, socio-economic and geographical features. The confusion matrix results indicate a high level of accuracy, suggesting that the chosen features—average learning years of school, GDP per capita, total GDP, and continent—have significant predictive power.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>