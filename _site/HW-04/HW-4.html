<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bella Shi's Website – hw-4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Bella Shi's Website
      </li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Bella Shi’s Website</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://bella.georgetown.domains/about/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About me</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Gathering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Gathering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Cleaning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Exploration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploration</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Naive Bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Naive Bayes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Clustering1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../DT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Decision Trees</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Conclusions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ARM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ARM</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#homework-4" id="toc-homework-4" class="nav-link active" data-scroll-target="#homework-4">Homework-4</a>
  <ul class="collapse">
  <li><a href="#assignment" id="toc-assignment" class="nav-link" data-scroll-target="#assignment">Assignment</a>
  <ul class="collapse">
  <li><a href="#dimensionality-reduction-tab" id="toc-dimensionality-reduction-tab" class="nav-link" data-scroll-target="#dimensionality-reduction-tab">Dimensionality reduction tab</a></li>
  <li><a href="#clustering-tab" id="toc-clustering-tab" class="nav-link" data-scroll-target="#clustering-tab">Clustering tab</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="homework-4" class="level1">
<h1>Homework-4</h1>
<p>During module-4, we will focus on partition clustering (k-means), hierarchical clustering (with dendrograms), and density clustering (DBSCAN), as well as dimensionality reduction. There are other clustering options as well and you can, and should, always do more than the baseline requirements!</p>
<p>We will also explore different distance (or similarity) measures, visualizations, methods for choosing the number of clusters (such as elbow and silhouette methods), and how to interpret the results of clustering analysis.</p>
<p><em>Before getting started, recall the following fundamental concepts:</em></p>
<ul>
<li><strong>Supervised learning:</strong>
<ul>
<li>In supervised learning we try to learn some KNOWN mapping from an input feature space <span class="math inline">\(\mathbf X\)</span> to an output target space <span class="math inline">\(Y\)</span> (i.e.&nbsp;regression or classification).</li>
</ul></li>
<li><strong>Un-supervised learning:</strong>
<ul>
<li>Typically when doing unsupervised learning (i.e.&nbsp;clustering or dimensionality reduction) you DO NOT know if any relevant mappings (relationships) in the data.</li>
<li>In this case, there is NO KNOWN “target” space <span class="math inline">\(Y\)</span> containing the “ground truth” labels (targets).</li>
<li>Instead, you have some features space <span class="math inline">\(\mathbf X\)</span> and you are trying to systematically figure out if the data in that space forms groups (clusters).</li>
<li>This “un-labeled” nature of the data-set is what makes it “unsupervised”.</li>
<li>It is possible to already have some categorical labels in your data before clustering. In this case, the clustering algorithm may or may-not find clusters corresponding to the existing labels.</li>
<li>If it finds new labels, this suggests that there may be unknown groups in the data which are NOT associated with the existing labels.</li>
</ul></li>
</ul>
<section id="assignment" class="level2">
<h2 class="anchored" data-anchor-id="assignment">Assignment</h2>
<p><strong>Software</strong>: For this assignment you MUST use Python. However, you can, and should, also repeat the exercise in R if you want.</p>
<section id="dimensionality-reduction-tab" class="level3">
<h3 class="anchored" data-anchor-id="dimensionality-reduction-tab">Dimensionality reduction tab</h3>
<p>The project’s objective is to explore and demonstrate the effectiveness of PCA and t-SNE in reducing the dimensionality of complex, multimodal data while preserving essential information and enhancing data visualization.</p>
<p>This project will allow you to apply your knowledge of PCA and t-SNE to a real-world scenario and gain valuable experience in dimensionality reduction and data visualization. It’s an opportunity to showcase your skills and creativity in tackling complex data analysis challenges.</p>
<p><strong>Instructions</strong>:</p>
<ol type="1">
<li>Dimensionality Reduction with PCA:
<ul>
<li>Apply PCA to your record dataset.</li>
<li>Determine the optimal number of principal components to retain.</li>
<li>Visualize the reduced-dimensional data using PCA.</li>
<li>Analyze and interpret the results.</li>
</ul></li>
<li>Dimensionality Reduction with t-SNE:
<ul>
<li>Implement t-SNE on the same dataset.</li>
<li>Explore different perplexity values and their impact.</li>
<li>Visualize the t-SNE output to reveal patterns and clusters.</li>
<li>Compare t-SNE results with PCA results.</li>
</ul></li>
<li>Evaluation and Comparison:
<ul>
<li>Evaluate the effectiveness of PCA and t-SNE in terms of preserving data structure and information.</li>
<li>Compare the visualization capabilities of PCA and t-SNE.</li>
<li>Discuss the trade-offs and scenarios where one technique may outperform the other.</li>
</ul></li>
</ol>
<p><strong>Components</strong>:</p>
<ol type="1">
<li>Project Proposal:
<ul>
<li>A brief proposal outlining your project’s objectives, dataset selection, and the tools or libraries you plan to use (e.g., Python, scikit-learn).</li>
</ul></li>
<li>Code Implementation:
<ul>
<li>Python code for implementing PCA and t-SNE on the selected dataset.</li>
<li>Code should include parameter tuning for t-SNE (perplexity) and visualization of the results.</li>
</ul></li>
<li>Project Report:
<ul>
<li>A comprehensive project report detailing the steps taken, results obtained, and your analysis.</li>
<li>Include visualizations, comparisons, and insights gained from the dimensionality reduction techniques.</li>
</ul></li>
</ol>
</section>
<section id="clustering-tab" class="level3">
<h3 class="anchored" data-anchor-id="clustering-tab">Clustering tab</h3>
<p>In this homework you will choose appropriate portions of one or more of your datasets and apply k-means, DBSCAN, and Hierarchical clustering.</p>
<p>You can do this for either your record data OR text data, you can choose which data-set you prefer to work with. You can also do both.</p>
<p>You will also need to document the process on your <code>clustering</code> tab on your GU-domains website.</p>
<p>In the clustering tab please have the following sub-sections</p>
<ul>
<li><strong>Introduction</strong>:
<ul>
<li>Provided brief summary (1 to 2 paragraphs) about your feature data <span class="math inline">\(X\)</span>, and what you are trying to achieve with your clustering analysis.</li>
</ul></li>
<li><strong>Theory</strong>:
<ul>
<li>Write a brief technical write up about how EACH clustering method works (KMEAN, DBSAN, hierarchical clustering). Also include details on model selection methods that you use (elbow, silhouette, etc).</li>
<li>Don’t go “too deep”, around 2 to 4 paragraphs, per method, is fine. Write it in a way that a boss with a non-technical background would understand. Describe the method from a “big picture” point of view, how it works and what it is supposed to do.<br>
</li>
<li>Do this “in your own words”. DO NOT copy this section from any other source. If you do so you will receive a zero on the assignment and will be referred to the department for further disciplinary action.</li>
</ul></li>
<li><strong>Methods:</strong>
<ul>
<li>In this section, describe your coding workflow;
<ul>
<li><ol type="1">
<li>If you are not using Quarto, then provide links to the relevant code in this section.</li>
</ol></li>
<li><ol start="2" type="1">
<li>If you are using Quarto (recommended), then include your code in-line using the “code folding” option, so that users can toggle the code on/off as needed. The notebook should also be hosted on Github. You can always do the entire thing in .ipynb then render it to HTML using Quarto at the end.</li>
</ol></li>
</ul></li>
<li>Please use the following workflow
<ul>
<li><strong>Data selection</strong>: If you have not done so already, create either a numeric record feature dataset <span class="math inline">\(\mathbf X\)</span> AND/OR a text feature dataset <span class="math inline">\(\mathbf X\)</span> from your existing data.
<ul>
<li>Remove the labels (targets) <span class="math inline">\(Y\)</span> as needed so that it is suitable for clustering.</li>
<li>If you have labels, you can use them at the end, to check if the clustering predictions coincided with the existing labels in the data-set. In general this may or may-not be true.</li>
<li>But these labels should not be used as part of the clustering analysis.</li>
</ul></li>
<li><strong>Feature selection</strong>: (optional)
<ul>
<li>If you want, you can perform filter based feature selection on your data-set <span class="math inline">\(\mathbf X\)</span> as a pre-processing step before clustering</li>
<li>You can also use optimal feature sets obtained during previous assignments</li>
</ul></li>
<li><strong>Hyper-parameter tuning</strong>
<ul>
<li>For each of the three clustering algorithms, perform any relevant parameter tuning in an attempt to achieve the optimal clustering results</li>
<li>e.g.&nbsp;For k-means, Use Elbow and Silhouette methods to illustrate the ideal number of clusters. Visualize your results.</li>
<li>Also, when relevant, explore different choices of distance metric for the algorithm. Which distance metric seems to works best in which cases and why?</li>
</ul></li>
<li><strong>Final results</strong>
<ul>
<li>Once you have everything “dialed in”, re-do the analysis one last time with the optimal parameter choice to get your “final results”.</li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Results:</strong>
<ul>
<li>Using your “final results”, discuss, illustrate, and compare the results of your various clustering analysis methods.</li>
<li>Which method seemed to work the best and why, which was easier to use or preferable, etc.</li>
<li>Can you make connections between the optimal cluster predictions, after parameter tuning, with any of the labels in the data set. Do they coincide? Why or why not?</li>
<li>Did the clustering results provide any new insights into your data?</li>
<li>Explore the results, and create as many meaningful visualizations as you need. Be creative, and experiment with different image aesthetics.</li>
<li>Ensure all visualizations are professional, ascetically pleasing, labeled, captioned, use color, are clear, and support your discussion and goals.</li>
</ul></li>
<li><strong>Conclusions</strong>:
<ul>
<li>In this section, the goal is to summarize &amp; wrap-up the report. It explains what was found, in a way that would make sense to a general readership.</li>
<li>This area is non-technical. Technical descriptions of what you did should be in the methods or results sections, not conclusions.</li>
<li>The Conclusions should focus on key and important findings and how these findings affect real-life and real people.</li>
</ul></li>
<li><strong>References</strong>:
<ul>
<li>Reference all non-original content.</li>
<li>Ideally (but optionally) use <code>.bibtex</code> combined with Quarto to provide in-line internal citations</li>
<li>See the following link for an example:
<ul>
<li>https://drive.google.com/open?id=12tYQnDuHS4ZxSTXgwsR4pRLhBYAMy14q&amp;authuser=jh2343%40georgetown.edu&amp;usp=drive_fs</li>
</ul></li>
</ul></li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>